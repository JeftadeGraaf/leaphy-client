<mat-toolbar color="primary">
    <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>menu</mat-icon>
    </button>
    <div>
        <mat-progress-spinner id="spinner"
            *ngIf="(appState.selectedRobotType$ | async) && (appState.isRobotWired$ | async) && !(robotWiredState.isInstallationVerified$ | async)"
            mode="indeterminate" diameter="30" color="warn"></mat-progress-spinner>
    </div>

    <mat-select id="robot-selector" placeholder="{{ 'SELECTROBOT' | translate }}"
        (selectionChange)="onRobotSelectionChange($event)" [value]="appState.selectedRobotType$ | async">
        <mat-option *ngFor="let robot of appState.availableRobotTypes$ | async" [value]="robot">{{robot.name}}
        </mat-option>
    </mat-select>
    <button mat-mini-fab id="connect-button" (click)="onConnectClicked()"
        [color]="'Color'+(backEndState.connectionStatus$ | async)">
        <mat-icon *ngIf="(backEndState.connectionStatus$ | async) == 4">check</mat-icon>
        <span *ngIf="(backEndState.connectionStatus$ | async) == 3" class="button-icon-text">?</span>
        <mat-icon *ngIf="(backEndState.connectionStatus$ | async) == 2">sync</mat-icon>
        <mat-icon *ngIf="(backEndState.connectionStatus$ | async) == 1">link</mat-icon>
        <mat-icon *ngIf="(backEndState.connectionStatus$ | async) == 0">block</mat-icon>
    </button>

    <span class="spacer"></span>
    <span id="title">Easybloqs</span>

    <span class="spacer"></span>
    <img src="./assets/leaphy-logo-white.png" id="logo">
</mat-toolbar>
<mat-menu #menu="matMenu">
    <button mat-menu-item [disabled]="!(appState.selectedRobotType$ | async)" (click)="onLoadWorkspaceClicked()">
      <mat-icon>folder</mat-icon>
      <span>{{ 'OPEN' | translate }}</span>
    </button>
    <span mat-menu-item disabled *ngIf="blocklyState.projectName$ | async as projectName">{{projectName}}</span>
    <button mat-menu-item [disabled]="!(appState.selectedRobotType$ | async) || !(blocklyState.projectFilePath$ | async)" (click)="onSaveWorkspaceClicked()">
      <mat-icon>save</mat-icon>
      <span>{{ 'SAVE' | translate }}</span>
    </button>
    <button mat-menu-item [disabled]="!(appState.selectedRobotType$ | async)" (click)="onSaveWorkspaceAsClicked()">
      <mat-icon>save</mat-icon>
      <span>{{ 'SAVEAS' | translate }}</span>
    </button>
    <span mat-menu-item [disabled]="!(appState.selectedRobotType$ | async)">
      <mat-checkbox (change)="onShowLeaphyExtraToggled()"><span>{{ 'SHOWLEAPHYEXTRA' | translate }}</span></mat-checkbox>
    </span>
  </mat-menu>